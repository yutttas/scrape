# CLAUDE.md

このファイルは、このリポジトリのコードを扱う際に Claude Code (claude.ai/code) にガイダンスを提供します。

## プロジェクト概要

ViteとTypeScriptで構築されたReactベースのWebスクレイピングアプリケーションです。このアプリは、CSSセレクターを使用してWebページからコンテンツをスクレイピングでき、複数ページのスクレイピングとCORSプロキシ機能をサポートしています。

## 要件定義

このサービスの詳細な要件定義は **[requirements.md](./requirements.md)** を参照してください。

新機能の追加や既存機能の変更を行う際は、必ず requirements.md の内容を確認し、要件に沿って実装してください。要件定義に記載のない大きな変更を行う場合は、まず requirements.md を更新してから実装を進めてください。

## 開発コマンド

### セットアップ
```bash
npm install
```

### アプリケーション起動
```bash
npm run dev
```
サーバーは `http://0.0.0.0:3000` で起動します

### ビルド
```bash
npm run build
```

### ビルドプレビュー
```bash
npm preview
```

## アーキテクチャ

### 単一ファイルコンポーネント構造
これは最小限のViteアプリケーションで、単一コンポーネントアーキテクチャを採用しています：
- **index.tsx**: Reactアプリケーション全体（Appコンポーネント、アイコン、プリセット設定）を含む
- **index.html**: HTML エントリーポイント。埋め込まれたCSSスタイルとReact依存関係のimportmapを含む
- **vite.config.ts**: Vite設定。GEMINI_API_KEYの環境変数インジェクション機能を含む

### 環境変数
アプリは `.env.local` に `GEMINI_API_KEY` を期待します。これはViteの `define` オプションを通じてビルドに注入されます（`process.env.GEMINI_API_KEY` および `process.env.API_KEY` として利用可能）。

### 主要機能の実装

**複数ページスクレイピング**: URLに `{i}` プレースホルダーを含めることができ、これがページ番号（1からnumPagesまで）に置換されます。スクレイピングロジックは各ページを順次処理します。

**CORSプロキシ**: CORS制限を回避するために `https://corsproxy.io/` をプロキシとして使用します。これは `useProxy` ステートで切り替え可能です。

**プリセットセレクター**: 特定の日本の求人サイト（ジョブメドレー、レバウェル、ナース専科、ハローワーク）用に4つのプリセットがハードコードされており、それぞれ対応するCSSセレクターが設定されています。

**クライアントサイドスクレイピング**: すべてのスクレイピングは `fetch()` と `DOMParser` を使用してブラウザ内で実行されます。バックエンドサーバーは不要です。

### パスエイリアス
プロジェクトでは、ルートディレクトリのエイリアスとして `@/*` を使用しています（`tsconfig.json` と `vite.config.ts` の両方で設定）。

## 重要な注意事項

- このアプリはクライアントサイドスクレイピングのみを実行 - ブラウザ内でHTMLを取得しDOMParserで解析します
- ブラウザのセキュリティ制限により、ほとんどのユースケースでCORSプロキシが必須です
- 1回の操作で最大10ページまでスクレイピング可能です（UI上で制限）
- このアプリにはバックエンドがありません - すべてのロジックがブラウザ内で実行されます

## 開発ガイドライン

### コードの変更時
1. 変更内容が requirements.md の要件に適合しているか確認
2. 新機能追加の場合は requirements.md の「将来的な拡張案」セクションを確認
3. 既存の単一ファイル構造を維持（過度なファイル分割を避ける）
4. プリセットを追加する場合は `presets` 配列に追加

### スタイルの変更
- すべてのスタイルは `index.html` 内の `<style>` タグに記述されています
- CSS変数（`:root`）を使用して一貫性を保っています

### 状態管理
- React の `useState` のみを使用（外部状態管理ライブラリなし）
- 新しい状態を追加する場合は、関連する状態と近くに配置してください
